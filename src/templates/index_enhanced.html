<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title data-translate="page_title">Sahih - Hadith Verification</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.rtl.min.css" integrity="sha384-dpuaG1suU0eT09tx5plTaGMLBsfDLzUCCUXOY2j/LSvXYuG6TBreq+8Est2Y9BEo" crossorigin="anonymous" disabled>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@400;700&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
      :root {
          --primary-color: #007bff;
          --secondary-color: #6c757d;
          --success-color: #28a745;
          --warning-color: #ffc107;
          --danger-color: #dc3545;
          --light-bg: #f8f9fa;
          --dark-text: #343a40;
          --light-text: #f8f9fa;
          --border-color: #dee2e6;
          --card-bg: #ffffff;
          --navbar-bg: #343a40;
          --shadow-sm: 0 .125rem .25rem rgba(0, 0, 0, .075);
          --shadow-md: 0 .5rem 1rem rgba(0,0,0,.15);
          --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, .175);
          --border-radius: .5rem;
          --input-bg: #ffffff;
          --input-text: #495057;
          --result-bg: #f8f9fa;
          --suggestion-hover-bg: #e9ecef;
          --suggestion-border: #ced4da;
          --suggestion-bg: #ffffff;
          --metadata-label-color: #495057;
          --metadata-value-color: #6c757d;
          --blockquote-color: #343a40;
          --modal-bg: #ffffff;
          --modal-header-bg: #f8f9fa;
          --modal-footer-bg: #f8f9fa;
          --alert-info-bg: #cfe2ff;
          --alert-info-text: #052c65;
          --alert-info-border: #9ec5fe;
          --font-family-sans-serif: "Poppins", sans-serif;
          --font-family-arabic: "Noto Sans Arabic", sans-serif;
      }

      html[data-theme="dark"] {
          --primary-color: #007bff;
          --secondary-color: #adb5bd;
          --success-color: #198754;
          --warning-color: #ffc107;
          --danger-color: #dc3545;
          --light-bg: #212529;
          --dark-text: #f8f9fa;
          --light-text: #f8f9fa;
          --border-color: #495057;
          --card-bg: #343a40;
          --navbar-bg: #1a1e21;
          --input-bg: #495057;
          --input-text: #f8f9fa;
          --result-bg: #343a40;
          --suggestion-hover-bg: #495057;
          --suggestion-border: #6c757d;
          --suggestion-bg: #343a40;
          --metadata-label-color: #f8f9fa;
          --metadata-value-color: #adb5bd;
          --blockquote-color: #f8f9fa;
          --modal-bg: #343a40;
          --modal-header-bg: #495057;
          --modal-footer-bg: #495057;
          --alert-info-bg: #0c4a6e;
          --alert-info-text: #bfdbfe;
          --alert-info-border: #1e40af;
      }

      body {
          font-family: var(--font-family-sans-serif);
          background-color: var(--light-bg);
          color: var(--dark-text);
          transition: background-color 0.3s ease, color 0.3s ease;
      }

      html[dir="rtl"] body {
          font-family: var(--font-family-arabic);
      }

      .navbar {
          background-color: var(--navbar-bg) !important;
          box-shadow: var(--shadow-sm);
          transition: background-color 0.3s ease;
      }

      .navbar-brand, .nav-link {
          color: var(--light-text) !important;
          transition: color 0.3s ease;
      }

      .navbar-brand:hover, .nav-link:hover {
          color: var(--primary-color) !important;
      }

      .btn-primary {
          background-color: var(--primary-color);
          border-color: var(--primary-color);
          transition: all 0.3s ease;
      }

      .btn-primary:hover {
          background-color: #0056b3;
          border-color: #0056b3;
          transform: translateY(-2px);
          box-shadow: var(--shadow-sm);
      }

      .btn-share {
          background-color: var(--success-color);
          border-color: var(--success-color);
          color: white;
          transition: all 0.3s ease;
      }

      .btn-share:hover {
          background-color: #157347;
          border-color: #157347;
          color: white;
      }

      .btn-download {
          background-color: #6f42c1;
          border-color: #6f42c1;
          color: white;
          transition: all 0.3s ease;
      }

      .btn-download:hover {
          background-color: #5a2d91;
          border-color: #5a2d91;
          color: white;
      }

      .form-control {
          background-color: var(--input-bg);
          border-color: var(--border-color);
          color: var(--input-text);
          border-radius: var(--border-radius);
          transition: background-color .15s ease-in-out, border-color .15s ease-in-out, box-shadow .15s ease-in-out;
      }

      .form-control:focus {
          background-color: var(--input-bg);
          border-color: var(--primary-color);
          color: var(--input-text);
          box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, .25);
      }

      .card {
          border: 1px solid var(--border-color);
          box-shadow: var(--shadow-sm);
          margin-bottom: 1.5rem !important;
          background-color: var(--card-bg);
          transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
          border-radius: var(--border-radius);
      }

      .card:hover {
          box-shadow: var(--shadow-md);
      }

      .language-switcher {
          display: flex;
          align-items: center;
          gap: 10px;
      }

      .language-flag {
          width: 24px;
          height: 24px;
          border-radius: 50%;
          cursor: pointer;
          transition: transform 0.2s ease, opacity 0.2s ease;
          opacity: 0.7;
      }

      .language-flag:hover {
          transform: scale(1.1);
          opacity: 1;
      }

      .language-flag.active {
          opacity: 1;
          border: 2px solid var(--primary-color);
      }

      /* RTL adjustments */
      html[dir="rtl"] .navbar-nav {
          flex-direction: row-reverse;
      }

      html[dir="rtl"] .language-switcher {
          flex-direction: row-reverse;
      }

      html[dir="rtl"] .btn-group {
          flex-direction: row-reverse;
      }

      /* Fix for RTL language switcher positioning */
      html[dir="rtl"] .navbar-nav .nav-item:last-child {
          margin-left: 0;
          margin-right: auto;
      }

      html[dir="ltr"] .navbar-nav .nav-item:last-child {
          margin-left: auto;
          margin-right: 0;
      }

      .hadith-actions {
          display: flex;
          gap: 10px;
          justify-content: flex-end;
          margin-top: 15px;
          flex-wrap: wrap;
      }

      html[dir="rtl"] .hadith-actions {
          justify-content: flex-start;
      }

      .hadith-text {
          font-size: 1.1rem;
          line-height: 1.6;
          margin-bottom: 1rem;
          color: var(--dark-text);
      }

      .hadith-metadata {
          font-size: 0.9rem;
          color: var(--metadata-value-color);
          border-top: 1px solid var(--border-color);
          padding-top: 1rem;
          margin-top: 1rem;
      }

      .hadith-metadata strong {
          color: var(--metadata-label-color);
      }

      /* Canvas for image generation */
      #hadithCanvas {
          display: none;
      }

      .footer {
          background-color: var(--navbar-bg);
          color: var(--light-text);
          padding: 2rem 0;
          margin-top: 3rem;
          transition: background-color 0.3s ease;
      }

      .footer a {
          color: var(--primary-color);
          text-decoration: none;
      }

      .footer a:hover {
          text-decoration: underline;
      }

      @media (max-width: 768px) {
          .hadith-actions {
              justify-content: center;
          }
          
          .language-switcher {
              gap: 5px;
          }
          
          .language-flag {
              width: 20px;
              height: 20px;
          }
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container">
        <a class="navbar-brand" href="/" data-translate="navbar_brand">Sahih</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/" data-translate="navbar_home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/hadith-ranking-explanation" data-translate="navbar_ranking_explanation">Hadith Ranking Explanation</a>
            </li>
            <li class="nav-item language-switcher">
              <img src="/static/img/en_flag.png" alt="English" data-lang="en" class="language-flag" id="enFlag">
              <img src="/static/img/ar_flag.png" alt="العربية" data-lang="ar" class="language-flag" id="arFlag">
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container mt-5">
      <h1 class="mb-4 text-center" data-translate="main_title">Verify a Hadith</h1>
      <p class="lead text-center mb-4" data-translate="lead_text">Enter the text of a Hadith below to check its authenticity and get the correct wording. Start typing for suggestions.</p>
      
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="mb-3">
            <label for="hadithInput" class="form-label" data-translate="input_label">Hadith Text</label>
            <div class="position-relative">
              <textarea class="form-control" id="hadithInput" rows="4" data-translate-placeholder="input_placeholder" placeholder="Start typing Hadith text here..."></textarea>
              <div id="suggestionsList" class="list-group position-absolute w-100" style="z-index: 1000; display: none;"></div>
            </div>
          </div>
          <div class="text-center">
            <button class="btn btn-primary btn-lg" type="button" id="checkButton" data-translate="check_button">Check Hadith</button>
          </div>
        </div>
      </div>

      <div id="resultArea" class="result-area">
        <div class="text-muted text-center" data-translate="results_placeholder">Enter a Hadith and click "Check Hadith" to see the results.</div>
      </div>
    </div>

    <!-- Canvas for image generation (hidden) -->
    <canvas id="hadithCanvas" width="800" height="600"></canvas>

    <footer class="footer">
      <div class="container text-center">
        <p>&copy; 2024 Sahih. All rights reserved.</p>
      </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
      let currentLang = "en";
      let currentTheme = "light";
      let translations = {};
      let suggestionFetchTimeout;

      const hadithInput = document.getElementById("hadithInput");
      const checkButton = document.getElementById("checkButton");
      const resultArea = document.getElementById("resultArea");
      const suggestionsList = document.getElementById("suggestionsList");
      const enFlag = document.getElementById("enFlag");
      const arFlag = document.getElementById("arFlag");
      const hadithCanvas = document.getElementById("hadithCanvas");

      // Image generation functions
      function generateHadithImage(hadithData, lang = 'en') {
          const canvas = hadithCanvas;
          const ctx = canvas.getContext('2d');
          
          // Set canvas size
          canvas.width = 800;
          canvas.height = 600;
          
          // Clear canvas
          ctx.fillStyle = '#ffffff';
          ctx.fillRect(0, 0, canvas.width, canvas.height);
          
          // Set text direction and font
          ctx.direction = lang === 'ar' ? 'rtl' : 'ltr';
          ctx.textAlign = lang === 'ar' ? 'right' : 'left';
          
          // Header
          ctx.fillStyle = '#007bff';
          ctx.fillRect(0, 0, canvas.width, 80);
          
          // Title
          ctx.fillStyle = '#ffffff';
          ctx.font = 'bold 24px Arial, "Noto Sans Arabic"';
          const title = lang === 'ar' ? 'صحيح - التحقق من الحديث' : 'Sahih - Hadith Verification';
          const titleX = lang === 'ar' ? canvas.width - 40 : 40;
          ctx.fillText(title, titleX, 45);
          
          // Hadith text
          ctx.fillStyle = '#343a40';
          ctx.font = '18px Arial, "Noto Sans Arabic"';
          const textX = lang === 'ar' ? canvas.width - 40 : 40;
          const textY = 140;
          
          // Word wrap function
          function wrapText(text, x, y, maxWidth, lineHeight) {
              const words = text.split(' ');
              let line = '';
              let currentY = y;
              
              for (let n = 0; n < words.length; n++) {
                  const testLine = line + words[n] + ' ';
                  const metrics = ctx.measureText(testLine);
                  const testWidth = metrics.width;
                  
                  if (testWidth > maxWidth && n > 0) {
                      ctx.fillText(line, x, currentY);
                      line = words[n] + ' ';
                      currentY += lineHeight;
                  } else {
                      line = testLine;
                  }
              }
              ctx.fillText(line, x, currentY);
              return currentY + lineHeight;
          }
          
          // Draw hadith text
          const hadithLabel = lang === 'ar' ? 'نص الحديث:' : 'Hadith Text:';
          ctx.font = 'bold 16px Arial, "Noto Sans Arabic"';
          ctx.fillText(hadithLabel, textX, 120);
          
          ctx.font = '16px Arial, "Noto Sans Arabic"';
          let currentY = wrapText(hadithData.text, textX, textY, 720, 25);
          
          // Metadata
          currentY += 20;
          ctx.font = 'bold 14px Arial, "Noto Sans Arabic"';
          
          const metadata = [
              { key: lang === 'ar' ? 'الراوي:' : 'Narrator:', value: hadithData.narrator },
              { key: lang === 'ar' ? 'المحدث:' : 'Scholar:', value: hadithData.scholar },
              { key: lang === 'ar' ? 'المصدر:' : 'Source:', value: hadithData.source },
              { key: lang === 'ar' ? 'الصفحة أو الرقم:' : 'Reference:', value: hadithData.reference },
              { key: lang === 'ar' ? 'درجة الصحة:' : 'Grade:', value: hadithData.grade }
          ];
          
          metadata.forEach(item => {
              if (item.value && item.value !== 'N/A') {
                  ctx.fillStyle = '#495057';
                  ctx.fillText(item.key, textX, currentY);
                  ctx.fillStyle = '#6c757d';
                  ctx.font = '14px Arial, "Noto Sans Arabic"';
                  const keyWidth = ctx.measureText(item.key).width;
                  const valueX = lang === 'ar' ? textX - keyWidth - 10 : textX + keyWidth + 10;
                  ctx.fillText(item.value, valueX, currentY);
                  ctx.font = 'bold 14px Arial, "Noto Sans Arabic"';
                  currentY += 25;
              }
          });
          
          // Footer
          ctx.fillStyle = '#f8f9fa';
          ctx.fillRect(0, canvas.height - 60, canvas.width, 60);
          ctx.fillStyle = '#6c757d';
          ctx.font = '12px Arial, "Noto Sans Arabic"';
          const footerText = lang === 'ar' ? 'تم إنشاؤها بواسطة موقع صحيح' : 'Generated by Sahih Website';
          const footerX = lang === 'ar' ? canvas.width - 40 : 40;
          ctx.fillText(footerText, footerX, canvas.height - 30);
          
          return canvas.toDataURL('image/png');
      }

      function downloadHadithImage(hadithData, lang = 'en') {
          const imageDataUrl = generateHadithImage(hadithData, lang);
          const link = document.createElement('a');
          link.download = `hadith_${Date.now()}.png`;
          link.href = imageDataUrl;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
      }

      async function shareHadith(hadithData, lang = 'en') {
          const imageDataUrl = generateHadithImage(hadithData, lang);
          const shareText = lang === 'ar' ? 
              `حديث شريف - تحقق من صحته على موقع صحيح: ${window.location.origin}` :
              `Hadith - Verify its authenticity on Sahih: ${window.location.origin}`;
          
          if (navigator.share && navigator.canShare) {
              try {
                  // Convert data URL to blob for sharing
                  const response = await fetch(imageDataUrl);
                  const blob = await response.blob();
                  const file = new File([blob], 'hadith.png', { type: 'image/png' });
                  
                  await navigator.share({
                      title: lang === 'ar' ? 'حديث شريف' : 'Hadith',
                      text: shareText,
                      files: [file]
                  });
              } catch (error) {
                  console.log('Error sharing:', error);
                  fallbackShare(shareText, imageDataUrl);
              }
          } else {
              fallbackShare(shareText, imageDataUrl);
          }
      }

      function fallbackShare(text, imageDataUrl) {
          // Copy text to clipboard
          navigator.clipboard.writeText(text).then(() => {
              alert(currentLang === 'ar' ? 
                  'تم نسخ النص إلى الحافظة. يمكنك تحميل الصورة باستخدام زر التحميل.' :
                  'Text copied to clipboard. You can download the image using the download button.');
          }).catch(() => {
              alert(currentLang === 'ar' ? 
                  'لا يمكن نسخ النص تلقائياً. يرجى نسخه يدوياً.' :
                  'Cannot copy text automatically. Please copy manually.');
          });
      }

      async function loadTranslations(lang) {
          try {
              const response = await fetch(`/locales/${lang}.json`);
              if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
              translations = await response.json();
              currentLang = lang;
              applyTranslations();
              updateLanguageFlags();
              updateDirection();
          } catch (error) {
              console.error("Error loading translations:", error);
          }
      }

      function applyTranslations() {
          document.querySelectorAll("[data-translate]").forEach(element => {
              const key = element.getAttribute("data-translate");
              if (translations[key]) {
                  element.textContent = translations[key];
              }
          });

          document.querySelectorAll("[data-translate-placeholder]").forEach(element => {
              const key = element.getAttribute("data-translate-placeholder");
              if (translations[key]) {
                  element.placeholder = translations[key];
              }
          });

          document.title = translations["page_title"] || "Sahih - Hadith Verification";
      }

      function updateLanguageFlags() {
          enFlag.classList.toggle('active', currentLang === 'en');
          arFlag.classList.toggle('active', currentLang === 'ar');
      }

      function updateDirection() {
          document.documentElement.setAttribute("dir", currentLang === "ar" ? "rtl" : "ltr");
          document.documentElement.setAttribute("lang", currentLang);
          
          const rtlLink = document.querySelector('link[href*="bootstrap.rtl.min.css"]');
          if (rtlLink) {
              rtlLink.disabled = currentLang !== "ar";
          }
      }

      async function checkHadith() {
          const inputText = hadithInput.value.trim();
          if (!inputText) {
              alert(translations["error_no_text"] || "Please enter some Hadith text to search.");
              return;
          }

          resultArea.innerHTML = `<div class="text-center"><div class="spinner-border text-primary" role="status"><span class="visually-hidden">Loading...</span></div><p class="mt-2" data-translate="checking_hadith">${translations["checking_hadith"] || "Checking Hadith... Please wait."}</p></div>`;

          try {
              const response = await fetch("/check", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({ text: inputText })
              });

              if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
              const data = await response.json();

              if (data.error) {
                  resultArea.innerHTML = `<div class="alert alert-danger">${translations["error_generic_check"] || "An error occurred while checking the Hadith. Please try again."}</div>`;
                  return;
              }

              if (!data.found || data.hadiths.length === 0) {
                  resultArea.innerHTML = `<div class="alert alert-info">${translations["no_hadith_found"] || "No Hadith found matching your query."}</div>`;
                  return;
              }

              let resultsHtml = "";
              data.hadiths.forEach((hadith, index) => {
                  resultsHtml += `
                      <div class="card">
                          <div class="card-body">
                              <div class="hadith-text">${hadith.text}</div>
                              <div class="hadith-metadata">
                                  ${hadith.narrator !== 'N/A' ? `<div><strong>${translations["narrator_label"] || "Narrator"}:</strong> ${hadith.narrator}</div>` : ''}
                                  ${hadith.scholar !== 'N/A' ? `<div><strong>${translations["scholar_label"] || "Scholar"}:</strong> ${hadith.scholar}</div>` : ''}
                                  ${hadith.source !== 'N/A' ? `<div><strong>${translations["source_label"] || "Source"}:</strong> ${hadith.source}</div>` : ''}
                                  ${hadith.reference !== 'N/A' ? `<div><strong>${translations["reference_label"] || "Reference"}:</strong> ${hadith.reference}</div>` : ''}
                                  ${hadith.grade !== 'N/A' ? `<div><strong>${translations["grade_label"] || "Grade"}:</strong> ${hadith.grade}</div>` : ''}
                              </div>
                              <div class="hadith-actions">
                                  <button class="btn btn-share btn-sm" onclick="shareHadith(${JSON.stringify(hadith).replace(/"/g, '&quot;')}, '${currentLang}')" data-translate="share_button">${translations["share_button"] || "Share"}</button>
                                  <button class="btn btn-download btn-sm" onclick="downloadHadithImage(${JSON.stringify(hadith).replace(/"/g, '&quot;')}, '${currentLang}')" data-translate="download_button">${translations["download_button"] || "Download Image"}</button>
                              </div>
                          </div>
                      </div>
                  `;
              });

              if (data.more_results_available) {
                  resultsHtml += `<div class="alert alert-info">${translations["more_results_on_dorar"] || "More results may be available on the Dorar Al-Sunnia website."}</div>`;
              }

              resultArea.innerHTML = resultsHtml;
          } catch (error) {
              console.error("Error:", error);
              resultArea.innerHTML = `<div class="alert alert-danger">${translations["error_generic_check"] || "An error occurred while checking the Hadith. Please try again."}</div>`;
          }
      }

      // Event listeners
      checkButton.addEventListener("click", checkHadith);
      hadithInput.addEventListener("keypress", (event) => {
          if (event.key === "Enter" && !event.shiftKey) {
              event.preventDefault();
              checkHadith();
          }
      });

      hadithInput.addEventListener("input", () => {
          const query = hadithInput.value.trim();
          suggestionsList.innerHTML = "";
          suggestionsList.style.display = "none";
          
          if (query.length < 3) return;
          
          clearTimeout(suggestionFetchTimeout);
          suggestionFetchTimeout = setTimeout(async () => {
              try {
                  const response = await fetch(`/suggest?q=${encodeURIComponent(query)}&limit=5`);
                  if (!response.ok) return;
                  const suggestions = await response.json();
                  if (suggestions.error || suggestions.length === 0) return;
                  
                  suggestionsList.innerHTML = "";
                  suggestions.forEach(suggestionText => {
                      const item = document.createElement("a");
                      item.href = "#";
                      item.className = "list-group-item list-group-item-action";
                      item.textContent = suggestionText;
                      item.addEventListener("click", (e) => {
                          e.preventDefault();
                          hadithInput.value = suggestionText;
                          suggestionsList.style.display = "none";
                          checkHadith();
                      });
                      suggestionsList.appendChild(item);
                  });
                  suggestionsList.style.display = "block";
              } catch (error) {
                  console.error("Error fetching suggestions:", error);
              }
          }, 300);
      });

      document.addEventListener("click", (event) => {
          if (!suggestionsList.contains(event.target) && event.target !== hadithInput) {
              suggestionsList.style.display = "none";
          }
      });

      enFlag.addEventListener("click", () => {
          if (currentLang !== "en") {
              localStorage.setItem("language", "en");
              loadTranslations("en");
          }
      });

      arFlag.addEventListener("click", () => {
          if (currentLang !== "ar") {
              localStorage.setItem("language", "ar");
              loadTranslations("ar");
          }
      });

      // Initialize
      document.addEventListener("DOMContentLoaded", () => {
          const savedLang = localStorage.getItem("language");
          const browserLang = navigator.language.split("-")[0];
          const initialLang = savedLang || (browserLang === "ar" ? "ar" : "en");
          loadTranslations(initialLang);
      });
    </script>
  </body>
</html>

